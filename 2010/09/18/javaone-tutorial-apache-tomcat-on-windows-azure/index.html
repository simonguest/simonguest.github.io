<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>JavaOne Tutorial Apache Tomcat on Windows Azure - simonguest.com
    </title>
    <link rel="alternate" href="http://localhost:8080/feed.xml" type="application/rss+xml" title="The only person allowed to login as 'guest'">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic|Anonymous+Pro:400,700,400italic,700italic|Merriweather:400,700,300">
    <link rel="stylesheet" href="/css/main.css">
  </head>
  <body class="article-detail">
    <header class="header">
      <div class="content-wrap">
        <h1>JavaOne Tutorial Apache Tomcat on Windows Azure</h1>
        <p class="author">Written by <span class="author">Simon Guest</span>
        </p>
      </div>
    </header>
    <div id="content">
      <div class="content-wrap">
        <article class="article">
          <section class="content"><p>As I mentioned in my previous post, I’ll be participating in a <a href="http://www.eventreg.com/cc250/sessionDetail.jsp?SID=313962">panel</a> at JavaOne on Monday.  With a similar format to last year, each panelist is given 5 – 10 minutes before it opens up for general discussion. Rather than showing a bunch of marketing slides, I thought it would be more interesting to put together a short tutorial for running Apache Tomcat on Windows Azure.  When I speak with Java developers interested in Windows Azure, this is often the #1 request. Here is an overview of what I will be&nbsp;showing:</p>
<p><span class="more"></span></p>
<p><strong>Step 1 – What you’ll need to get&nbsp;started</strong></p>
<p>As you might imagine, you are going to first need a Windows Azure account.  I would recommend going to <a href="http://www.microsoft.com/windowsazure/offers">www.microsoft.com/windowsazure/offers</a> and signing up for the introductory special, which will allow you to test your application for free.  The introductory offer gives you the first 25 hours at no cost, which should be more than enough time to get up and&nbsp;running.</p>
<p>If you are at JavaOne however, I have a limited quantity (100) of tokens that give you 30 days worth of access with no need to submit any registration or credit card information.  See me at the end of the panel session or throughout the conference, and in exchange for a business card, I’ll be happy to give you one at no&nbsp;cost!</p>
<p>After you have your account, you’ll want to download and install the <a href="http://go.microsoft.com/fwlink/?LinkID=130232">Windows Azure <span class="caps">SDK</span></a>.  After installation, set your <span class="caps">PATH</span> environment to include the location of the SDK binaries (typically <em>C:/Program Files/Windows Azure <span class="caps">SDK</span>/v1.1/bin</em>).  This is important to ensure that the <span class="caps">SDK</span> is accessible from the command&nbsp;line.</p>
<p>Finally, you’ll need to install the <a href="http://code.msdn.microsoft.com/winazuretomcat">Windows Azure Tomcat Solution Accelerator</a>.  Feel free to install this in any directory you’d like – I’m using <em>c:/dev/javaone2010/tomcat/azure</em> for the purposes of this&nbsp;tutorial.</p>
<p><strong>Step 2 – Building and running your&nbsp;site</strong></p>
<p>With all of the pre-requisites downloaded and installed, it’s time to build and test your site.  To do this, open a command prompt, and navigate to the directory that you chose for the solution accelerator.  From this directory, run <strong>buildme.cmd</strong>.  You’ll be prompted to provide the installation path of your Tomcat installation and a <span class="caps">JRE</span> on your&nbsp;machine.</p>
<p><img src="/articles/javaone-tutorial-apache-tomcat-on-windows-azure/image.png" alt="image"></p>
<p>After a successful build, run the <strong>runme.cmd</strong> file. This will run Tomcat using the Windows Azure Desktop Execution Tool – also known as the local development&nbsp;fabric.</p>
<p><img src="/articles/javaone-tutorial-apache-tomcat-on-windows-azure/image1.png" alt="image"></p>
<p><img src="/articles/javaone-tutorial-apache-tomcat-on-windows-azure/image2.png" alt="image"></p>
<p>This is a great way to test that your application is going to work when deployed to production.  Navigate to the <span class="caps">URL</span> provided at the end (replace the tcp with http) to ensure that the Tomcat instance is working correctly on your local&nbsp;machine.</p>
<p><img src="/articles/javaone-tutorial-apache-tomcat-on-windows-azure/image3.png" alt="image"></p>
<p>You can open the development fabric tool (found running in your system tray) if you want to stop and/or investigate the&nbsp;service.</p>
<p><strong>Step 3 – Packaging and deploying your&nbsp;site</strong></p>
<p>Once you are satisfied that everything looks good, it’s time to package the application ready for deployment to the cloud.  To do this, run the <strong>packme.cmd </strong>script.  This will invoke the Windows Azure Packaging Tool, and pull together everything needed into one package file for&nbsp;deployment.</p>
<p><img src="/articles/javaone-tutorial-apache-tomcat-on-windows-azure/image4.png" alt="image"></p>
<p>When this has completed, you should see a <strong>Tomcat.cspkg </strong>file and a <strong>ServiceConfiguration.cscfg </strong>file in the directory.  The .cspkg file is quite large as it contains your application, the Tomcat instance, and <span class="caps">JRE</span> binaries.  Despite the size, this format makes it convenient if you prefer to use a different version of Tomcat or a different JRE in the&nbsp;future.</p>
<p><img src="/articles/javaone-tutorial-apache-tomcat-on-windows-azure/image5.png" alt="image"></p>
<p>To deploy to the cloud, log on to the portal (<a href="http://windows.azure.com">http://windows.azure.com</a>) and create a new hosted service.  Walk through the wizard to specify the name, description, <span class="caps">URL</span>, and location where you want the service to be deployed.  Next, hit the “Deploy” button and specify the location of the previous package and configuration&nbsp;file.</p>
<p><img src="/articles/javaone-tutorial-apache-tomcat-on-windows-azure/image6.png" alt="image"></p>
<p>You have two options when it comes to deploying – either a file from your local storage (i.e. your local disk) or a file from an Azure storage account (blob storage).  If you have issues with the local storage (many http connections timeout before the package can be uploaded in time), I would recommend using <a href="http://azurestorageexplorer.codeplex.com/">Neudesic’s Azure Storage Explorer</a> to upload your files to a blob storage&nbsp;container.</p>
<p><img src="/articles/javaone-tutorial-apache-tomcat-on-windows-azure/image7.png" alt="image"></p>
<p>Hit <em>Deploy</em>, and your package will be uploaded to Windows Azure – this will likely take a few minutes because of the size of the&nbsp;deployment.</p>
<p>Once this has been completed, hit the <em>Run</em> button to bring your site to&nbsp;life.</p>
<p><img src="/articles/javaone-tutorial-apache-tomcat-on-windows-azure/image8.png" alt="image"></p>
<p><img src="/articles/javaone-tutorial-apache-tomcat-on-windows-azure/image9.png" alt="image"></p>
<p>Once you have a site up and running, feel free to explore some of the ways that you can either scale your application to multiple nodes or explore some of the <a href="http://www.windowsazure4j.org">other features</a> on Windows Azure available to Java&nbsp;developers.</p>
<p>There are many ways that this could be improved by integrating with existing build environments (I think Maven integration would be fascinating), but hopefully this short tutorial gives you a starting point for getting a simple Tomcat site up and running on Windows&nbsp;Azure.</p>
</section>
        </article>
      </div>
    </div>
    <footer>
      <div class="content-wrap">
        <div class="nav"><a href="/">« Full blog</a></div>
        <section class="about"><p>Simon Guest is the VP of Platform R&amp;D at Concur Technologies, passionate about software engineering, API design, and developer experience.</p>
<p>Simon is a certified IT Architect (CITA-P), a member of the British Computer Society (MBCS), was named as one of “Microsoft’s Key Employee Losses of 2010″ by eWeek, and has been awarded a place on Sun Microsystems’ “Speaker Wall of Fame” on two occasions.</p>
<p>In addition to speaking, Simon enjoys writing, is the author of numerous articles, patents, and books, and maintains an active blog at <a href="http://simonguest.com">http://simonguest.com</a>.</p>
<p>You can get in touch with Simon through <a href="http://linkedin.com/pub/simonguest">LinkedIn</a></p>

        </section>
        <section class="copy">
          <p>&copy; 2014 Simon Guest &mdash; powered by&nbsp;<a href="https://github.com/jnordberg/wintersmith">Wintersmith</a>
            <script type="text/javascript">
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
              ga('create', 'UA-56671816-1', 'auto');
              ga('send', 'pageview');
              
            </script>
          </p>
        </section>
      </div>
    </footer>
  </body>
</html>