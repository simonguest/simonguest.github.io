<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>Uploading Photos from Mobile Web Applications - simonguest.com
    </title>
    <link rel="alternate" href="feed.xml" type="application/rss+xml" title="The only person allowed to login as 'guest'">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic|Anonymous+Pro:400,700,400italic,700italic|Merriweather:400,700,300">
    <link rel="stylesheet" href="/css/main.css">
  </head>
  <body class="article-detail">
    <header class="header">
      <div class="content-wrap">
        <h1>Uploading Photos from Mobile Web Applications</h1>
        <p class="author">Written by <span class="author">Simon Guest</span>
        </p>
      </div>
    </header>
    <div id="content">
      <div class="content-wrap">
        <article class="article">
          <section class="content"><p>Here at Neudesic, we’re fortunate to be involved in many exciting <span class="caps">HTML5</span>/Mobile Web applications for different organizations. For many of these projects, one of the common requests, especially for field-facing mobile applications, is the ability to upload a photo from within a web page in a mobile&nbsp;browser.</p>
<p><span class="more"></span></p>
<p>If you are not familiar with the space, you may think this should be default behaviour, but surprisingly uploading media is one of those areas that is still going through the standardization process. Eric Bidelman has a <a href="http://www.html5rocks.com/en/tutorials/getusermedia/intro/">great overview</a> of the three “rounds” of standardization that have taken place so far as part of the <a href="http://www.w3.org/2009/dap/">Device <span class="caps">API</span> working group</a>.</p>
<p><strong>What can you do&nbsp;today?</strong></p>
<p>While Eric’s article gives a great overview of what’s likely to come, the purpose of this post is to explore what’s possible today, outlining the relative pros and cons of each&nbsp;approach.</p>
<p>Firstly, let’s take a look at what’s supported out of the&nbsp;box:</p>
<p><strong>Android</strong></p>
<p>If you are using Android 3.x+ (i.e. either Android tablets running Honeycomb or later, and Android phones running <span class="caps">ICS</span>) - or users are running Chrome or Firefox Mobile for Android, the browser will support an input element that can invoke the&nbsp;camera:</p>
<pre><code class="lang-html"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"file"</span> <span class="attribute">accept</span>=<span class="value">"image/*"</span> <span class="attribute">capture</span>=<span class="value">"camera"</span>&gt;</span>
</code></pre>
<p>Simply add this element to your web page, and together with some server-side processing for the upload, users can upload the image from their&nbsp;device.</p>
<p><img src="/articles/uploading-photos-from-mobile-web-applications/AndroidImageUpload.png" alt="Android Image Upload"></p>
<p>As Eric mentions in his article, it does look like things are heading towards <em>getUserMedia()</em> instead. Although this new <span class="caps">API</span> works with latest versions of the desktop version of Chrome, we haven’t found anything that works on mobile browsers as of&nbsp;yet.</p>
<p><strong>iPhone/iPad</strong></p>
<p>Unfortunately, the input element above does not work on Mobile Safari on iOS5 today - the experience for the user is just a disabled button. This is true for the recently released version of Chrome for iOS also (as it’s just a wrapper over&nbsp;UIWebView).</p>
<p>Things are changing however.  At <span class="caps">WWDC</span> this year, Apple publicly announced support for photo and video uploads within Mobile Safari shipping with iOS 6. It’s difficult to say much more about the implementation here (as the developer/beta programs are under NDA), but if you have access to Apple’s developer program, it’s definitely worth checking&nbsp;out.</p>
<p><strong>Apache Cordova&nbsp;(PhoneGap)</strong></p>
<p>If you want to support earlier Android versions, and/or can’t wait for iOS 6, arguably the most popular choice is Apache Cordova (previously known as PhoneGap). Apache Cordova provides a native wrapper around <span class="caps">HTML</span>-based content, and supports several platforms today - including iOS and Android. The Cordova API supports media capture, and with a couple of lines of JavaScript, it’s possible to instantiate the camera or invoke the camera rolls within your Mobile Web&nbsp;application.</p>
<p><img src="/articles/uploading-photos-from-mobile-web-applications/CameraRoll.png" alt="Camera Roll on iOS"></p>
<p><strong>Pros:</strong> Works with the most popular versions of mobile browsers, and as of now, Cordova provides a good user experience for the user. The user presses a “add photo” button in the <span class="caps">HTML</span> application, and the native wrapper invokes the camera control without the user needing to know whats going on. If using the camera roll, the API also supports the option of uploading multiple&nbsp;photos.</p>
<p><strong>Cons:</strong> Using Cordova does however change the deployment model for the application. No longer can you just visit a Web site to use your application - you now need to think about distributing your application - either via the AppStore for public-facing applications or through another channel for enterprise&nbsp;apps.</p>
<p>In addition to the deployment, Cordova also introduces several options that need to be considered for actually transfering the image to the site. The default is to use Base64 encoding, which is good for small images, but we’ve experienced performance problems on large images from <span class="caps">5MP</span>+ cameras. The Cordova API does support a File Transfer API, which works well except it doesn’t yet support authentication, so you’ll need to create an anonymous area to post your photos to. If you do need authentication, you’ll want to send the photo directly after capture, which will likely mean writing a custom Cordova plug in and using NSUrlConnection to send your photo to the&nbsp;server.</p>
<p><strong>Companion&nbsp;Application</strong></p>
<p>An alternative approach to wrapping your <span class="caps">HTML</span> content with native code is to ship a “companion application” responsible for uploading the&nbsp;photo.</p>
<p>Both iOS and Android support custom <span class="caps">URL</span> schemes, which means that applications can respond to different URL requests from the browser. For example, I can create a native application responsible for taking and uploading pictures, using a custom URL scheme called simonphoto:// which I can then pass various parameters - for example, the ID of a project that I’m uploading photos for. Once the user clicks on the simonphoto:// link within the mobile browser, the application launches and I can take and upload as many photos as I&nbsp;want.</p>
<p><strong>Pros:</strong> The biggest draw to this approach is that the <span class="caps">HTML</span> application doesn’t need to be wrapped with any native&nbsp;code.</p>
<p><strong>Cons:</strong> While I don’t have to wrap my <span class="caps">HTML</span>, the user still needs to obtain the companion application, which will likely involve a trip to the AppStore or other link for download. In addition, even when the companion application is downloaded, the user experience isn’t quite as slick as the the PhoneGap approach. For example, in iOS there is no natural way of getting back to the Web app once the native application is ready to hand back control (unless you pass a return or app id in the parameters). Also, there is no way of checking whether the companion application is installed or not from the Web&nbsp;page.</p>
<p><strong>Picup</strong></p>
<p><a href="http://picupapp.com">Picup</a> is an example of a free companion app that works in a similar way as outlined above. It uses the fileupload:// <span class="caps">URL</span> scheme to invoke the Picup app, which much be&nbsp;installed.</p>
<p><img src="/articles/uploading-photos-from-mobile-web-applications/Picup.png" alt="Picup Application"></p>
<p><strong>Pros: </strong>As&nbsp;above.</p>
<p><strong>Cons:</strong> As above. No version for Android (although I’m sure there are equivalent apps&nbsp;available).</p>
<p><strong>Email</strong></p>
<p>Finally, a very simple approach, but one that I’ve seen a couple of people use is sending the photo via email. Your application has a “mailto” link which includes a subject (maybe the <span class="caps">ID</span> corresponding to the application) and body that reads “Please remember to attach your photo”. The user attaches the photo manually and it’s sent to a server-monitored email store for&nbsp;processing.</p>
<p><strong>Pros: </strong>Nothing native here, and deployment model stays the&nbsp;same.</p>
<p><strong>Cons: </strong>Funky experience for the user. You’ll also need to setup a server side environment to handle the incoming emails, strip the attachments, and correlate with your&nbsp;application.</p>
<p><strong>Summary</strong></p>
<p>A lengthy post, but hopefully it gives you an overview of how to do photo upload from mobile devices today. To&nbsp;summarize:</p>
<p>If you are writing an application that won’t be released for a few months, and will primarily target Android <span class="caps">ICS</span> and iOS6, you should be able to use the input element outlined above to invoke the camera and upload a picture. If you do this, make sure you understand the transition to getUserMedia as the specifications&nbsp;mature.</p>
<p>If you are writing an application that needs to target today’s platforms - namely Android 2.x and iOS5, you’ll either need to use Cordova to create a wrapper or a companion application (either hand crafted, or something like Picup). Choosing between Cordova and a companion application is a balance of user experience vs. deployment. A Cordova application will keep the user experience seamless, but you will be responsible for the deployment of the application as a&nbsp;result.</p>
<p>If you don’t want to do any device development, and are just looking to provide a shortcut for users to send photos, you could consider the basic mailto: / email link&nbsp;approach.</p>
</section>
        </article>
      </div>
    </div>
    <footer>
      <div class="content-wrap">
        <div class="nav"><a href="/">« Full blog</a></div>
        <section class="about"><p>Simon Guest is the VP of Platform R&amp;D at Concur Technologies, passionate about software engineering, API design, and developer experience.</p>
<p>Simon is a certified IT Architect (CITA-P), a member of the British Computer Society (MBCS), was named as one of “Microsoft’s Key Employee Losses of 2010″ by eWeek, and has been awarded a place on Sun Microsystems’ “Speaker Wall of Fame” on two occasions.</p>
<p>In addition to speaking, Simon enjoys writing, is the author of numerous articles, patents, and books, and maintains an active blog at <a href="http://simonguest.com">http://simonguest.com</a>.</p>
<p>You can get in touch with Simon through <a href="http://linkedin.com/pub/simonguest">LinkedIn</a></p>

        </section>
        <section class="copy">
          <p>&copy; 2015 Simon Guest &mdash; powered by&nbsp;<a href="https://github.com/jnordberg/wintersmith">Wintersmith</a>
            <script type="text/javascript">
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
              ga('create', 'UA-56671816-1', 'auto');
              ga('send', 'pageview');
              
            </script>
          </p>
        </section>
      </div>
    </footer>
  </body>
</html>